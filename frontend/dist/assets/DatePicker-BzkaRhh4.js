import{r as l,j as r,b as F,c as I,d as T}from"./index-DegvU4xC.js";const L="w-full bg-transparent px-3 py-2 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#0B5150]/30 dark:text-slate-200 dark:placeholder-slate-500 dark:focus:ring-[#0B5150]/40 transition-colors duration-150";function R({value:e,onChange:n,placeholder:i="YYYY-MM-DD"}){const[g,o]=l.useState(!1),a=l.useRef(null),d=B(e),[c,p]=l.useState(d?d.getFullYear():new Date().getFullYear()),[u,b]=l.useState(d?d.getMonth():new Date().getMonth()),[k,h]=l.useState(e||"");l.useEffect(()=>h(e||""),[e]),l.useEffect(()=>{function t(s){a.current&&(a.current.contains(s.target)||o(!1))}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const w=new Date(c,u,1),j=w.getDay(),S=O(c,u),N=w.toLocaleString("en-US",{month:"long",year:"numeric"}),$=e,M=x(new Date);function Y(t){const s=new Date(c,u,t),m=x(s);h(m),n==null||n(m),o(!1)}function v(t){const s=V(t);s&&(h(s),n==null||n(s))}return r.jsxs("div",{ref:a,className:"relative w-full",children:[r.jsx("button",{type:"button",className:"absolute left-2 top-1.5 rounded-md p-1 text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5",onClick:()=>o(t=>!t),"aria-label":"Open calendar",children:r.jsx(F,{className:"h-4 w-4"})}),r.jsx("input",{type:"text",value:k,onChange:t=>h(t.target.value),onBlur:t=>v(t.target.value),onKeyDown:t=>t.key==="Enter"&&v(t.target.value),className:`${L} pl-9 text-left rounded-xl`,placeholder:i}),g&&r.jsxs("div",{className:"absolute z-50 mt-2 w-80 overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-xl ring-1 ring-black/5 dark:border-white/10 dark:bg-[#0F141B]",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-3 py-2 dark:border-white/10",children:[r.jsx("button",{type:"button",className:"rounded-lg p-1 hover:bg-slate-100 dark:hover:bg-white/5",onClick:()=>{const t=new Date(c,u-1,1);p(t.getFullYear()),b(t.getMonth())},children:r.jsx(I,{className:"h-4 w-4"})}),r.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:N}),r.jsx("button",{type:"button",className:"rounded-lg p-1 hover:bg-slate-100 dark:hover:bg-white/5",onClick:()=>{const t=new Date(c,u+1,1);p(t.getFullYear()),b(t.getMonth())},children:r.jsx(T,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"grid grid-cols-7 gap-1 px-3 pt-2 text-center text-xs text-slate-500 dark:text-slate-400",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(t=>r.jsx("div",{children:t},t))}),r.jsxs("div",{className:"grid grid-cols-7 gap-1 p-3 pt-1",children:[Array.from({length:j}).map((t,s)=>r.jsx("div",{},`pad-${s}`)),Array.from({length:S}).map((t,s)=>{const m=s+1,f=x(new Date(c,u,m)),y=$===f,E=M===f;return r.jsx("button",{type:"button",onClick:()=>Y(m),className:`h-9 rounded-lg text-sm transition ${y?"bg-indigo-600 text-white":"hover:bg-slate-100 dark:hover:bg-white/5"} ${E&&!y?"ring-1 ring-indigo-400":""}`,children:m},f)})]})]})]})}function D(e){return e<10?`0${e}`:String(e)}function x(e){return`${e.getFullYear()}-${D(e.getMonth()+1)}-${D(e.getDate())}`}function B(e){if(!e)return null;const n=/^(\d{4})-(\d{1,2})-(\d{1,2})$/.exec(e);if(n){const i=+n[1],g=+n[2],o=+n[3],a=new Date(i,g-1,o);return isNaN(a)?null:a}return null}function O(e,n){return new Date(e,n+1,0).getDate()}function V(e){if(!e)return"";const n=String(e).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;const i=n.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/);if(i){let[g,o,a,d]=i;return`${d}-${a.padStart(2,"0")}-${o.padStart(2,"0")}`}return""}export{R as default};
