import{r,j as s,C as S,a as D}from"./index-DegvU4xC.js";function C({value:x,onChange:c,options:m=[],placeholder:k="Select…"}){const[n,l]=r.useState(!1),[h,o]=r.useState(-1),[d,p]=r.useState(""),u=r.useRef(null),g=r.useRef(null),i=r.useMemo(()=>m.map(e=>({value:String(e.id),label:e.name||e.vendor_name||e.title||String(e.id)})),[m]),a=r.useMemo(()=>{const e=d.trim().toLowerCase();return e?i.filter(t=>t.label.toLowerCase().includes(e)||String(t.value).toLowerCase().includes(e)):i},[i,d]),f=i.find(e=>e.value===String(x));r.useEffect(()=>{const e=t=>{u.current&&(u.current.contains(t.target)||l(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),r.useEffect(()=>{n?(setTimeout(()=>{var e;return(e=g.current)==null?void 0:e.focus()},0),o(a.length?0:-1)):(p(""),o(-1))},[n,a.length]);function y(){l(e=>!e)}function b(e){c==null||c(e),l(!1)}function v(e){!n&&["ArrowDown","Enter"," "].includes(e.key)&&(e.preventDefault(),l(!0))}function j(e){if(e.key==="Escape"){e.preventDefault(),l(!1);return}if(e.key==="ArrowDown"&&o(t=>Math.min(t+1,a.length-1)),e.key==="ArrowUp"&&o(t=>Math.max(t-1,0)),e.key==="Enter"){e.preventDefault();const t=a[h];t&&b(t.value)}}return s.jsxs("div",{ref:u,className:"relative",children:[s.jsxs("button",{type:"button",onClick:y,onKeyDown:v,"aria-haspopup":"listbox","aria-expanded":n,className:"flex w-full items-center justify-between rounded-xl px-3 py-2 text-left text-slate-800 dark:text-slate-100",children:[s.jsx("span",{className:f?"":"text-slate-400",children:f?f.label:k}),s.jsx(S,{className:`ml-2 h-4 w-4 text-slate-400 transition-transform duration-150 ${n?"rotate-180":""}`})]}),n&&s.jsxs("div",{className:"absolute z-50 mt-2 w-full overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-xl ring-1 ring-black/5 dark:border-white/10 dark:bg-[#0F141B]",children:[s.jsx("div",{className:"sticky top-0 border-b border-slate-200 bg-white p-2 dark:border-white/10 dark:bg-[#0F141B]",children:s.jsx("input",{ref:g,type:"text",value:d,onChange:e=>p(e.target.value),onKeyDown:j,placeholder:"Type to filter…",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-white/10 dark:bg-[#0B1118] dark:text-slate-100"})}),s.jsxs("ul",{className:"max-h-60 overflow-auto p-1",children:[a.length===0&&s.jsx("li",{className:"px-3 py-2 text-sm text-slate-500 dark:text-slate-400",children:"No matches"}),a.map((e,t)=>{const N=h===t,w=String(x)===e.value;return s.jsx("li",{className:"rounded-md",children:s.jsxs("button",{type:"button",role:"option","aria-selected":w,onMouseEnter:()=>o(t),onClick:()=>b(e.value),className:`flex w-full items-center justify-between rounded-md px-3 py-2 text-left text-sm transition-colors ${N?"bg-indigo-50 text-slate-900 dark:bg-indigo-600/30 dark:text-white":"text-slate-700 hover:bg-slate-50 dark:text-slate-200 dark:hover:bg-indigo-600/20"}`,children:[s.jsx("span",{className:"truncate",children:e.label}),w&&s.jsx(D,{className:"ml-2 h-4 w-4 text-indigo-600 dark:text-indigo-300"})]})},e.value)})]})]})]})}export{C as default};
